<p-toast />
<div class="container">
  <div class="card">
    <div class="header">
      <p-image 
        src="{{user().propic}}" 
        previewImageSrc="{{user().propic}}" 
        alt="Image"
        [preview]="true" />
      <div class="center">
        <h1>Dati Anagrafici</h1>
      </div>
    </div>
    
    
    <div class="form-container">
      <form [formGroup]="userForm">
        <div class="top">
          <input class="name" type="text" placeholder="Nome" [(ngModel)]="user().firstName" formControlName="firstName"/>
          <input class="surname" type="text" placeholder="Cognome" [(ngModel)]="user().lastName" formControlName="lastName" />
        </div>
        <div class="bottom">
          <input class="email" type="text" placeholder="{{user().email}}" readonly disabled/>
          <input class="codfisc" type="text"
          pattern="^(?:[A-Z][AEIOU][AEIOUX]|[AEIOU]X{2}|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}(?:[\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[15MR][\dLMNP-V]|[26NS][0-8LMNP-U])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM]|[AC-EHLMPR-T][26NS][9V])|(?:[02468LNQSU][048LQU]|[13579MPRTV][26NS])B[26NS][9V])(?:[A-MZ][1-9MNP-V][\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$"
          placeholder="Codice fiscale" [(ngModel)]="user().codiceFiscale" formControlName="codiceFiscale" />
        </div>
      </form>
    </div>
    <div class="actions">
      <button pButton type="button" (click)="close()" class="p-button p-button-secc">Chiudi </button>
      <br>
      <button pButton type="button" (click)="openCaptcha()" class="p-button p-button-secc" >Cambia Password</button>
      <br>
      <button pButton type="button" (click)="saveChanges()" class="p-button p-button-secc">Salva </button>
     

    </div>
  </div>
</div>

<p-dialog header="Cambia password" [modal]="true" [(visible)]="visibleCaptcha" [style]="{ width: '25rem' }">
  <app-recaptcha (isValid)="changePwd()"></app-recaptcha>
</p-dialog>